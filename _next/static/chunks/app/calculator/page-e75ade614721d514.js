(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[179],{262:function(e,s,t){Promise.resolve().then(t.bind(t,2095))},2095:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(7437),l=t(2265),n=t(8792);let r=null,d=0;async function o(){let e=Date.now();if(r&&e-d<864e5)return r;try{let s=await fetch("https://cbu.uz/ru/exchange-rates/json/",{cache:"no-store"});if(s.ok){let t=await s.json(),a=t.find(e=>"USD"===e.Ccy),l=t.find(e=>"CNY"===e.Ccy);if(a&&l){let s=parseFloat(a.Rate),t=parseFloat(l.Rate);return r={usdToUzs:s,usdToCny:s/t,lastUpdated:new Date().toISOString()},d=e,r}}}catch(e){console.error("Ошибка при получении курсов валют:",e)}let s=localStorage.getItem("exchangeRates");if(s)try{let e=JSON.parse(s);return{usdToUzs:e.usdToUzs||12500,usdToCny:e.usdToCny||7.2,lastUpdated:e.lastUpdated||new Date().toISOString()}}catch(e){}return{usdToUzs:12500,usdToCny:7.2,lastUpdated:new Date().toISOString()}}function i(e,s,t){return"UZS"===s?e*t.usdToUzs:"CNY"===s?e*t.usdToCny:e}function c(){let[e,s]=(0,l.useState)(""),[t,c]=(0,l.useState)(null),[u,x]=(0,l.useState)(""),[m,h]=(0,l.useState)(null),[b,g]=(0,l.useState)(!0),[p,y]=(0,l.useState)(!1),[N,f]=(0,l.useState)({usdToUzs:"",usdToCny:""});(0,l.useEffect)(()=>{j()},[]);let j=async()=>{g(!0);try{let e=await o();h(e),f({usdToUzs:e.usdToUzs.toString(),usdToCny:e.usdToCny.toString()})}catch(s){console.error("Ошибка загрузки курсов:",s);let e={usdToUzs:12500,usdToCny:7.2,lastUpdated:new Date().toISOString()};h(e),f({usdToUzs:e.usdToUzs.toString(),usdToCny:e.usdToCny.toString()})}finally{g(!1)}},S=()=>{if(x(""),c(null),!e){x("Введите вес груза");return}if(!m){x("Курсы валют не загружены");return}let s=parseFloat(e);if(isNaN(s)||s<=0){x("Введите корректный вес");return}let t=15*s,a=i(t,"UZS",m),l=i(t,"CNY",m);c({usd:Math.round(100*t)/100,uzs:Math.round(a),cny:Math.round(100*l)/100})};return(0,a.jsx)("div",{className:"py-16 bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 max-w-4xl",children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-center mb-4",children:"Калькулятор стоимости доставки"}),(0,a.jsxs)("p",{className:"text-center text-gray-600 mb-12",children:["Тариф: ",15," USD за килограмм"]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 md:p-8",children:[(0,a.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Курсы валют"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:j,className:"text-sm btn-primary",disabled:b,children:b?"Загрузка...":"Обновить"}),(0,a.jsx)("button",{onClick:()=>y(!p),className:"text-sm bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:p?"Отмена":"Ввести вручную"})]})]}),p?(0,a.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"USD → UZS"}),(0,a.jsx)("input",{type:"number",value:N.usdToUzs,onChange:e=>f({...N,usdToUzs:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Например: 12500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"USD → CNY"}),(0,a.jsx)("input",{type:"number",value:N.usdToCny,onChange:e=>f({...N,usdToCny:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Например: 7.2"})]}),(0,a.jsx)("button",{onClick:()=>{let s=parseFloat(N.usdToUzs),a=parseFloat(N.usdToCny);if(isNaN(s)||isNaN(a)||s<=0||a<=0){x("Введите корректные значения курсов");return}let l={usdToUzs:s,usdToCny:a,lastUpdated:new Date().toISOString()};localStorage.setItem("exchangeRates",JSON.stringify(l)),r=l,d=Date.now(),h(l),y(!1),x(""),e&&t&&S()},className:"w-full btn-primary",children:"Сохранить курсы"})]}):m&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"USD → UZS:"}),(0,a.jsx)("span",{className:"ml-2 font-semibold",children:m.usdToUzs.toLocaleString("ru-RU")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"USD → CNY:"}),(0,a.jsx)("span",{className:"ml-2 font-semibold",children:m.usdToCny.toFixed(2)})]}),(0,a.jsxs)("div",{className:"col-span-2 text-xs text-gray-500",children:["Обновлено:"," ",new Date(m.lastUpdated).toLocaleString("ru-RU")]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Вес груза (кг) *"}),(0,a.jsx)("input",{type:"number",value:e,onChange:e=>s(e.target.value),placeholder:"Введите вес в килограммах",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",min:"0.01",step:"0.01"})]}),(0,a.jsx)("button",{onClick:S,className:"w-full btn-primary mb-6",disabled:!m,children:"Рассчитать стоимость"}),u&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:u}),t&&m&&(0,a.jsxs)("div",{className:"mb-6 p-6 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4 text-green-800",children:"Результат расчёта"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-700",children:"Стоимость в USD:"}),(0,a.jsxs)("span",{className:"font-bold text-lg text-primary",children:[t.usd.toFixed(2)," USD"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-700",children:"Стоимость в UZS:"}),(0,a.jsxs)("span",{className:"font-bold text-lg text-primary",children:[t.uzs.toLocaleString("ru-RU")," UZS"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-700",children:"Стоимость в CNY:"}),(0,a.jsxs)("span",{className:"font-bold text-lg text-primary",children:[t.cny.toFixed(2)," CNY"]})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-4",children:"* Указанная стоимость является ориентировочной. Финальная цена может отличаться в зависимости от дополнительных услуг и особенностей груза."})]})]}),(0,a.jsx)("div",{className:"mt-8 text-center text-gray-600",children:(0,a.jsxs)("p",{children:["Нужна консультация?"," ",(0,a.jsx)(n.default,{href:"/contacts",className:"text-primary hover:underline",children:"Свяжитесь с нами"})]})})]})})}}},function(e){e.O(0,[792,971,69,744],function(){return e(e.s=262)}),_N_E=e.O()}]);